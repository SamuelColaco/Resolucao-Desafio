# üí∏ PicPay Simplificado - API de Pagamentos

Esta API simula uma plataforma de pagamentos simplificada, inspirada no PicPay. √â poss√≠vel realizar dep√≥sitos e transfer√™ncias entre usu√°rios comuns e lojistas, com regras de neg√≥cio espec√≠ficas para cada tipo.

## üöÄ Tecnologias

- [Node.js](https://nodejs.org/)
- [Express](https://expressjs.com/)
- [Prisma](https://www.prisma.io/)
- [Zod](https://zod.dev/)
- [JWT](https://jwt.io/)
- [Axios](https://axios-http.com/)
- [CORS](https://www.npmjs.com/package/cors)
- [express-async-errors](https://www.npmjs.com/package/express-async-errors)
- [Docker](https://www.docker.com/)

---
### Passos para Instala√ß√£o

1. **Clone o Reposit√≥rio**:
   ```bash
   git clone https://github.com/SamuelColaco/API-Daily-Diet.git

2. **Ir para o Diret√≥rio**
    ```bash
    cd API-Refund
3. **Instalar as Depend√™ncias**
    ```bash
    npm install
4. **Crie um arquivo .env na raiz do projeto**
    E coloque nele essas variav√©is de ambiente

    DATABASE_URL="escreva a url do banco de dados aqui (postgresql://user:password@db:5432/refund)"
    AUTH_SECRET="Escreva seu secret aqui"
5. **Rode o Servidor**
    ```bash
    npm run dev
    'O servidor estar√° disponiv√©l em http://localhost:3333'

## Docker

- **Comando para rodar o docker-compose**
    ```docker
    docker-compose up -d
- **Comando para verificar o container rodando**
    ```docker
    docker ps ou docker-compose ps
- **Comando para parar o container**
    ```docker
    docker-compose down


## üß± Entidades

### üßç‚Äç‚ôÇÔ∏è NormalUser

Usu√°rios comuns podem transferir e receber dinheiro.

Campos obrigat√≥rios:
- `name`: string
- `email`: string (√∫nico)
- `password`: string
- `CPF`: string (√∫nico)
- `balance`: number (inicialmente zero)

### üßë‚Äçüíº Seller

Usu√°rios do tipo lojista, que apenas **recebem** dinheiro.

Campos obrigat√≥rios:
- `name`: string
- `email`: string (√∫nico)
- `password`: string
- `CNPJ`: string (√∫nico)
- `balance`: number

### üîê Session

Respons√°vel por autentica√ß√£o de usu√°rios (`JWT`).

- Rota: `POST /session`
- Corpo: `{ email, password }`

### üí∏ Transaction

Realiza a transfer√™ncia de dinheiro entre usu√°rios ou para lojistas.

Campos obrigat√≥rios:
- `payerId`: ID do remetente
- `payeeId`: ID do destinat√°rio (caso usu√°rio comum)
- `sellerId`: ID do destinat√°rio (caso lojista)
- `amount`: valor da transfer√™ncia

---


## üìå Rotas

### üîê Sess√£o

    URL: /session
    Prop√≥sito: Cria um token JWT
    Body: {
        "email":"email do usu√°rio",
        "password":"senha do usu√°rio"
    }
    Message: {
	"token": "Token JWT aparece_aqui"
    }
    StatusCode: 201(Created)

     URL: /user
    Prop√≥sito: Cria um novo usu√°rio
    Body: {
        "name": "Jo√£o",
        "email": "joao@email.com",
        "password": "senha123",
        "CPF": "12345678900"
    }
    Message: {
        "Usu√°rio cadastrado"
    }
    StatusCode: 201(Created)

    URL: /seller
    Prop√≥sito: Cadastra um vendedor
    Body: {
        "name": "Loja X",
        "email": "loja@email.com",
        "password": "senha123",
        "CNPJ": "12345678000199"
    }

    Header: 
        Authorization: Bearer seu_token_aqui
    Message: {
        "Usu√°rio Criado"
    }
    StatusCode: 201(Created)

    URL: /transcation/payeeId
    Prop√≥sito: Realiza transa√ß√£o
    Body: {
        "amount": 50
    }

    Header: 
        Authorization: Bearer seu_token_aqui
    Message: {
        "value": valor,
        "payer": "id do pagador",
        "payee": id de quem recebeu"
    }

    StatusCode: 201(Created)

    
    URL: /transcation/sellerId
    Prop√≥sito: Realiza transa√ß√£o
    Body: {
        "amount": 50
    }

    Header: 
        Authorization: Bearer seu_token_aqui
    Message: {
        "value": valor,
        "payer": "id do pagador",
        "payee": id de quem recebeu"
    }

    StatusCode: 201(Created)


 GET
    URL: /user
    Prop√≥sito: Lista todos os usu√°rios
    Body: N√£o prescisa passar nada
    Header: 
        Authorization: Bearer seu_token_aqui
    Reposta: [
	{
		"id": "Id do usu√°rio em formato UUID",
		"name": "Nome",
		"email": "email",
		"password_hash": "Senha em formato HASH: $2b$08$aRjpep6EFNnHSBVctXG09.ALi0Y87hlC52Eb5aURXTVhNCB9ugw46",
        "CPF": "cpf do usu√°rio"
		"balance": "Dinheiro em saldo"
		"createdAt": " Data da cria√ß√£o do usu√°rio: 2025-03-06T11:45:53.476Z",
		"updatedAt": "Data da ultima vez que ele foi atualizado: 2025-03-06T12:09:56.320Z"
	},
    ]
    StatusCode: 200(Ok)

     URL: /sellers
     Prop√≥sito: Lista todos os vendedores
     Body: N√£o prescisa passar nada
     Header: 
        Authorization: Bearer seu_token_aqui
     Reposta: [
	{
		"id": "Id do usu√°rio em formato UUID",
		"name": "Nome",
		"email": "email",
		"password_hash": "Senha em formato HASH: $2b$08$aRjpep6EFNnHSBVctXG09.ALi0Y87hlC52Eb5aURXTVhNCB9ugw46",
        "CNPJ": "cnpj do usu√°rio"
		"balance": "Dinheiro em saldo"
		"createdAt": " Data da cria√ß√£o do usu√°rio: 2025-03-06T11:45:53.476Z",
		"updatedAt": "Data da ultima vez que ele foi atualizado: 2025-03-06T12:09:56.320Z"
	},
    ]
    StatusCode: 200(Ok)

 PUT

    URL: /user/:id
    Prp√≥sito: Atualiza um usu√°rio
    Body: {
        Passa o quer atualizar do usu√°rio, por exemplo: {
	        "password": "nova senha"
        }
    }
    Message: {
        "Usu√°rio atualizado com sucesso"
    }
    StatusCode: 200(Ok)

    URL: /seller/:id
    Prop√≥sito: Atualiza um vendedor
    Body: {
        Passa o quer atualizar do vendedor, por exemplo: {
	        "name": "novo nome do vendedor"
        }
    }
    Message: {
        "Update feito com sucesso"
    }
    StatusCode: 200(Ok)

    
 Delete

    URL: /user/:id
    Prp√≥sito: Deleta um usu√°rio
    Body: N√£o passa nada
    Message: {
        "Deletado com sucesso"
    }
    StatusCode: 200(Ok)

    URL: /seller/:id
    Prop√≥sito: Deleta um usu√°rio
    Body:  N√£o passa nada
    Message: {
        "Deletado com sucesso"
    }
    StatusCode: 200(Ok)
